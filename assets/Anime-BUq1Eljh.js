import{_ as D}from"./BaseLayout-CoPpf1Ug.js";import{_ as E,r as c,l as j,o as M,i as I,w as C,g as s,c as n,j as v,a as t,t as o,n as f,F as _,d as w,k as F}from"./index-jOGLxoXg.js";const S={key:0,class:"flex justify-center py-12"},B={key:1,class:"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-200 p-4 rounded-lg mb-6"},L={key:2,class:"text-sm text-gray-600 dark:text-gray-400 mb-6 flex items-center"},N=["disabled"],T={class:"grid grid-cols-1 md:grid-cols-7 gap-4"},$={class:"font-bold text-center border-b pb-2 mb-3 text-gray-800 dark:text-white"},U={key:0,class:"space-y-4"},H={class:"w-16 h-20 shrink-0"},P=["src","alt"],R={class:"p-2 flex-1 min-w-0"},V={class:"font-medium text-gray-800 dark:text-white text-sm truncate"},q={class:"text-xs text-gray-600 dark:text-gray-300"},z={class:"flex justify-between text-xs mt-1"},K={class:"text-primary-600 dark:text-primary-400"},O={class:"text-gray-500 dark:text-gray-400"},Y={key:1,class:"text-center py-4 text-sm text-gray-500 dark:text-gray-400"},Z={__name:"Anime",setup(Q){const u=c([]),l=c(!0),g=c(null),m=c(null),d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],k=c(new Date().getDay()),h=j(()=>{const i={};return d.forEach(r=>{i[r]=u.value.filter(e=>e.nextAiringEpisode&&b(new Date(e.nextAiringEpisode.airingAt*1e3))===r)}),i});function b(i){return d[i.getDay()]}function A(i){const r=Math.floor(Date.now()/1e3),e=i-r;if(e<=0)return"Airing now";const a=Math.floor(e/86400),y=Math.floor(e%86400/3600),x=Math.floor(e%3600/60);return a>0?`${a}d ${y}h`:y>0?`${y}h ${x}m`:`${x}m`}async function p(){l.value=!0,g.value=null;try{const i=`
      query {
        Page {
          mediaList(userName: "YourAniListUsername", status: CURRENT, type: ANIME) {
            media {
              id
              title {
                english
                romaji
              }
              coverImage {
                large
              }
              nextAiringEpisode {
                airingAt
                episode
              }
            }
          }
        }
      }
    `;setTimeout(()=>{u.value=[{id:1,title:{english:"My Hero Academia",romaji:"Boku no Hero Academia"},coverImage:{large:"https://s4.anilist.co/file/anilistcdn/media/anime/cover/medium/bx21856-BIORD3CZXyZk.jpg"},nextAiringEpisode:{airingAt:Math.floor(Date.now()/1e3)+86400,episode:5}},{id:2,title:{english:"Demon Slayer",romaji:"Kimetsu no Yaiba"},coverImage:{large:"https://s4.anilist.co/file/anilistcdn/media/anime/cover/medium/bx101922-PEn1CTc93blC.jpg"},nextAiringEpisode:{airingAt:Math.floor(Date.now()/1e3)+86400*2,episode:8}},{id:3,title:{english:"Spy x Family",romaji:"Spy x Family"},coverImage:{large:"https://s4.anilist.co/file/anilistcdn/media/anime/cover/medium/bx140960-vN5mHk7IpUQV.jpg"},nextAiringEpisode:{airingAt:Math.floor(Date.now()/1e3)+86400*5,episode:3}},{id:4,title:{english:"Chainsaw Man",romaji:"Chainsaw Man"},coverImage:{large:"https://s4.anilist.co/file/anilistcdn/media/anime/cover/medium/bx127230-FlochcFsyoF4.png"},nextAiringEpisode:{airingAt:Math.floor(Date.now()/1e3)+86400*3,episode:6}}],l.value=!1,m.value=new Date},1e3)}catch{g.value="Failed to load anime data. Please try again later.",l.value=!1}}return M(()=>{p();const i=6*60*60*1e3;setInterval(p,i)}),(i,r)=>(s(),I(D,{title:"Anime Tracker",subtitle:"Keep track of your watching list"},{default:C(()=>[l.value&&!u.value.length?(s(),n("div",S,r[0]||(r[0]=[t("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"},null,-1)]))):v("",!0),g.value?(s(),n("div",B,o(g.value),1)):v("",!0),m.value?(s(),n("div",L,[t("span",null,"Last updated: "+o(m.value.toLocaleString()),1),t("button",{onClick:p,class:"ml-2 p-1 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700",disabled:l.value},[(s(),n("svg",{xmlns:"http://www.w3.org/2000/svg",class:f(["h-4 w-4",{"animate-spin":l.value}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},r[1]||(r[1]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)]),2))],8,N)])):v("",!0),t("div",T,[(s(),n(_,null,w(d,e=>t("div",{key:e,class:f(["bg-white dark:bg-gray-800 rounded-lg shadow p-4 space-y-4 transform transition-all duration-500","animate-slide-in-bottom",e===d[k.value]?"ring-2 ring-primary-500":""]),style:F(`animation-delay: ${d.indexOf(e)*.1}s`)},[t("h3",$,o(e),1),h.value[e]&&h.value[e].length?(s(),n("div",U,[(s(!0),n(_,null,w(h.value[e],a=>(s(),n("div",{key:a.id,class:"flex rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-700 shadow-sm hover:shadow-md transition-shadow"},[t("div",H,[t("img",{src:a.coverImage.large,alt:a.title.english||a.title.romaji,class:"w-full h-full object-cover"},null,8,P)]),t("div",R,[t("h4",V,o(a.title.english||a.title.romaji),1),t("p",q,"Ep "+o(a.nextAiringEpisode.episode),1),t("div",z,[t("span",K,o(A(a.nextAiringEpisode.airingAt)),1),t("span",O,o(new Date(a.nextAiringEpisode.airingAt*1e3).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)])])]))),128))])):(s(),n("div",Y," No episodes airing "))],6)),64))])]),_:1}))}},G=E(Z,[["__scopeId","data-v-f140d765"]]);export{G as default};
